---
  pool: devpool

  trigger:
  - dev
  variables:
    JAVA_HOME_11_X64: '/usr/lib/jvm/java-11-openjdk-amd64' 
  
  stages:
  - stage: build
    displayName: shopizerbuils
    jobs:
      - job: buildpacakage
        displayName: shopizerpackage
        steps: 
        - task: Maven@3
          inputs: 
            mavenPOMFile: 'pom.xml'
            goals: 'package'
            publishJUnitResults: true
            testResultsFiles: '**/surefire-reports/TEST-*.xml'
            javaHomeOption: 'JDKVersion'
            jdkVersionOption: '1.11'
        - task: PublishTestResults@2    
          inputs: 
            testResultsFormat: 'JUnit' 
            testResultsFiles: '**/target/surefire-reports/TEST-*.xml'
        - task: ArchiveFiles@2
          inputs:
            rootFolderOrFile: 'target/*.jar'
            includeRootFolder: false
            archiveFile: '$(Build.ArtifactStagingDirectory)/*.jar'
            replaceExistingArchive: false
   

